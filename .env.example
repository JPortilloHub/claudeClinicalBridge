# ============================================================================
# Claude Clinical Bridge - Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control

# ============================================================================
# Environment
# ============================================================================
ENVIRONMENT=development  # development, staging, production

# ============================================================================
# Anthropic Claude API
# ============================================================================
ANTHROPIC_API_KEY=your_anthropic_api_key_here
CLAUDE_MODEL=claude-opus-4-6  # claude-opus-4-6, claude-sonnet-4-5, claude-haiku-4-5

# ============================================================================
# Epic FHIR Sandbox
# ============================================================================
EPIC_CLIENT_ID=your_epic_client_id
EPIC_CLIENT_SECRET=your_epic_client_secret
EPIC_FHIR_BASE_URL=https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4
EPIC_AUTH_URL=https://fhir.epic.com/interconnect-fhir-oauth/oauth2/token
EPIC_PRIVATE_KEY_PATH=  # Path to JWT private key for backend services auth (optional)

# ============================================================================
# Oracle Health (Cerner) Sandbox
# ============================================================================
ORACLE_CLIENT_ID=your_oracle_health_client_id
ORACLE_CLIENT_SECRET=your_oracle_health_client_secret
ORACLE_FHIR_BASE_URL=https://fhir-ehr-code.cerner.com/r4/ec2458f2-1e24-41c8-b71b-0e701af7583d
ORACLE_AUTH_URL=https://authorization.cerner.com/tenants/ec2458f2-1e24-41c8-b71b-0e701af7583d/protocols/oauth2/profiles/smart-v1/token

# ============================================================================
# Vector Database (Qdrant)
# ============================================================================
QDRANT_URL=http://localhost:6333  # Local Qdrant server
QDRANT_API_KEY=  # Optional for local, required for Qdrant Cloud
QDRANT_COLLECTION_ICD10=icd10_codes
QDRANT_COLLECTION_CPT=cpt_codes

# ============================================================================
# Embeddings Model
# ============================================================================
EMBEDDINGS_MODEL=dmis-lab/biobert-base-cased-v1.2  # BioBERT for medical text
EMBEDDINGS_DIMENSION=768  # BioBERT embedding dimension
EMBEDDINGS_BATCH_SIZE=32
EMBEDDINGS_CACHE_DIR=./models  # Directory to cache downloaded models (~400MB)

# ============================================================================
# Database (Payer Policies)
# ============================================================================
DATABASE_URL=sqlite:///./data/policies.db  # SQLite for local development
# For production: postgresql://user:password@localhost:5432/clinical_bridge

# ============================================================================
# Redis (Future Caching)
# ============================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_ENABLED=false  # Enable when caching is implemented

# ============================================================================
# Security and Encryption
# ============================================================================
ENCRYPTION_KEY_PATH=./config/encryption.key  # Path to encryption key
SECRET_KEY=your_secret_key_here_min_32_chars  # For JWT and session management

# ============================================================================
# HIPAA Compliance
# ============================================================================
AUDIT_LOG_PATH=./logs/audit.log
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years per HIPAA requirement
PHI_REDACTION_ENABLED=true
PHI_REDACTION_METHOD=mask  # mask, hash, remove

# ============================================================================
# Evaluation
# ============================================================================
EVALUATION_MODE=false
GOLDEN_DATASET_PATH=tests/evaluation/test_cases/golden_dataset.json
EVALUATION_OUTPUT_DIR=./evaluation_results

# ============================================================================
# MCP Servers
# ============================================================================
MCP_SERVER_HOST=localhost
MCP_SERVER_PORT_EPIC=8001
MCP_SERVER_PORT_ORACLE=8002
MCP_SERVER_PORT_KNOWLEDGE=8003
MCP_SERVER_PORT_POLICY=8004

# ============================================================================
# Agent Configuration
# ============================================================================
AGENT_TIMEOUT_SECONDS=120
AGENT_MAX_RETRIES=3
AGENT_LATENCY_TARGET_SECONDS=30

# ============================================================================
# Logging
# ============================================================================
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # json, text
LOG_FILE_PATH=./logs/application.log
LOG_FILE_MAX_BYTES=10485760  # 10MB
LOG_FILE_BACKUP_COUNT=5

# ============================================================================
# FastAPI (Future Web API)
# ============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=true  # Auto-reload for development
API_WORKERS=1

# ============================================================================
# Development Settings
# ============================================================================
DEBUG=true
TESTING=false
MOCK_FHIR_ENABLED=false  # Use mock FHIR data instead of real sandbox

# ============================================================================
# Feature Flags
# ============================================================================
ENABLE_CLINICAL_DOC_AGENT=true
ENABLE_MEDICAL_CODING_AGENT=true
ENABLE_COMPLIANCE_AGENT=true
ENABLE_PRIOR_AUTH_AGENT=true
ENABLE_QA_AGENT=true
